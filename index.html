<!DOCTYPE html>
<html>
<head>
	<title>Picture and Comments</title>
	<style>
		body {
			background-image: url('background.jpg');
			font-family: Arial, sans-serif;
			font-size: 16px;
			color: #333;
		}
		.container {
			width: 800px;
			height: 900px;
			background-color: #fff;
			margin: 0 auto;
			padding: 20px;
			border-radius: 10px;
			box-shadow: 0px 0px 10px 2px rgba(0,0,0,0.2);
		}

		.form {
			display: flex;
			flex-direction: column;
			align-items: center;
			margin-top: 20px;
		}
		input[type="text"],
		input[type="email"],
		textarea {
			padding: 10px;
			border-radius: 5px;
			border: 1px solid #ccc;
			margin-bottom: 10px;
			width: 100%;
		}
		input[type="submit"] {
			background-color: #4CAF50;
			color: #fff;
			padding: 10px;
			border-radius: 5px;
			border: none;
			cursor: pointer;
			transition: background-color 0.3s ease;
		}
		input[type="submit"]:hover {
			background-color: #3e8e41;
		}
		.comments {
			margin-top: 20px;
			background-color: #eee;
			padding: 10px;
			overflow: auto;
			height: 400px;
			border: 1px solid #ccc;
			border-radius: 5px;
		}
		.comment {
			padding: 5px;
			border-bottom: 1px solid #ccc;
		}
		.comment button {
			background-color: #f44336;
			color: #fff;
			border: none;
			border-radius: 5px;
			padding: 5px 10px;
			cursor: pointer;
			margin-left: 10px;
			transition: background-color 0.3s ease;
		}
		.comment button:hover {
			background-color: #d32f2f;
		}
	</style>
</head>
<body>
	<div class="container">
		<img src="picture.png" width="200" height="200">
		<form class="form">
			<label for="name">Name:</label>
			<input type="text" id="name" required>
			<label for="email">Email:</label>
			<input type="email" id="email" required>
			<label for="comment">Comment:</label>
			<textarea id="comment" maxlength="200" required></textarea>
			<div>
				<span id="charCount"></span> characters left
			</div>
			<input type="submit" value="Submit">
		</form>
		<div class="comments"></div>
	</div>
	<script>
		const form = document.querySelector('.form');
		const nameInput = document.getElementById('name');
		const emailInput = document.getElementById('email');
		const commentInput = document.getElementById('comment');
		const charCount = document.getElementById('charCount');
		const commentsDiv = document.querySelector('.comments');
		let comments = [];

		form.addEventListener('submit', function(event) {
			event.preventDefault();
			if (nameInput.value.trim() === '' || commentInput.value.trim() === '' || !isValidEmail(emailInput.value)) {
				return;
			}
			const comment = {
				name: nameInput.value,
				email: emailInput.value,
				comment: commentInput.value,
				date: new Date()
			};
			comments.push(comment);
			renderComments();
			showSuccessMessage();
			form.reset();
		});

		commentInput.addEventListener('input', function() {
			const count = commentInput.maxLength - commentInput.value.length;
			charCount.textContent = count;
		});

		function renderComments() {
			commentsDiv.innerHTML = '';
			comments.forEach(function(comment, index) {
				const commentDiv = document.createElement('div');
				commentDiv.classList.add('comment');
				commentDiv.innerHTML = `
					<p><strong>${comment.name}:</strong> ${comment.comment}</p>
					<span>${formatDate(comment.date)}</span>
					<button onclick="deleteComment(${index})">Delete</button>
				`;
				commentsDiv.appendChild(commentDiv);
			});
		}

		function deleteComment(index) {
			comments.splice(index, 1);
			renderComments();
		}

		function formatDate(date) {
			const options = {year: 'numeric', month: 'long', day: 'numeric'};
			return date.toLocaleDateString('en-US', options);
		}

		function isValidEmail(email) {
			const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
			return regex.test(email);
		}

		function showSuccessMessage() {
			const messageDiv = document.createElement('div');
			messageDiv.textContent = 'Comment submitted successfully!';
			messageDiv.style.backgroundColor = '#4CAF50';
			messageDiv.style.color = '#fff';
			messageDiv.style.padding = '10px';
			messageDiv.style.borderRadius = '5px';
			messageDiv.style.marginTop = '20px';
			messageDiv.style.textAlign = 'center';
			messageDiv.style.fontSize = '1.2em';
			messageDiv.style.fontWeight = 'bold';
			form.insertAdjacentElement('afterend', messageDiv);
			setTimeout(function() {
				messageDiv.remove();
			}, 3000);
		}
	</script>
</body>
